---
phase: 03-performance-seo
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/HeroSection.vue
  - components/GallerySection.vue
  - components/MembersSection.vue
  - components/GalleryLightbox.client.vue
  - nuxt.config.ts
autonomous: true
requirements:
  - PERF-01
  - PERF-02
  - FND-04

must_haves:
  truths:
    - "All images use NuxtImg component for automatic WebP/AVIF format conversion"
    - "Hero image (LCP element) loads with eager loading and high fetch priority"
    - "Gallery and team member images use lazy loading for deferred loading"
    - "All images have explicit width/height dimensions to prevent CLS"
    - "All images include descriptive alt text for accessibility"
  artifacts:
    - path: "components/HeroSection.vue"
      provides: "Hero section with optimized NuxtImg for LCP"
      min_lines: 90
      contains: "NuxtImg"
    - path: "components/GallerySection.vue"
      provides: "Gallery with NuxtImg thumbnails"
      contains: "NuxtImg.*preset"
    - path: "components/MembersSection.vue"
      provides: "Team member photos with NuxtImg"
      contains: "NuxtImg"
    - path: "components/GalleryLightbox.client.vue"
      provides: "Lightbox full-size images with NuxtImg"
      contains: "NuxtImg"
    - path: "nuxt.config.ts"
      provides: "Image presets for hero and gallery"
      exports: ["image.presets"]
  key_links:
    - from: "components/HeroSection.vue"
      to: "nuxt.config.ts"
      via: "preset configuration for hero image"
      pattern: "preset.*hero"
    - from: "components/GallerySection.vue"
      to: "nuxt.config.ts"
      via: "preset configuration for gallery"
      pattern: "preset.*galleryThumb"
---

<objective>
Convert all standard <img> tags to <NuxtImg> component for automatic format conversion (WebP/AVIF), lazy loading, and responsive sizing to achieve Core Web Vitals passing scores.

Purpose: The @nuxt/image module is installed but not actively used. Converting to NuxtImg enables automatic image optimization, reducing bundle sizes and improving LCP/CLS scores.

Output: All image-based components using NuxtImg with proper presets, lazy loading configuration, and dimension attributes.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-performance-seo/03-RESEARCH.md
@.planning/phases/02-content-engagement/02-01-SUMMARY.md
@.planning/phases/02-content-engagement/02-03-SUMMARY.md
@.planning/phases/02-content-engagement/02-04-SUMMARY.md
@components/HeroSection.vue
@components/GallerySection.vue
@components/MembersSection.vue
@components/GalleryLightbox.client.vue
@nuxt.config.ts

# Current State Analysis
From research 03-RESEARCH.md:
- @nuxt/image is installed and configured with galleryThumb and galleryFull presets
- HeroSection.vue uses standard <img> tag (bypasses optimization)
- GallerySection.vue already uses NuxtImg for thumbnails (GOOD)
- GalleryLightbox.client.vue uses standard <img> (needs conversion)
- MembersSection.vue uses standard <img> for team photos (needs conversion)

# Image Configuration Reference
nuxt.config.ts already has:
```typescript
image: {
  quality: 80,
  formats: ['webp', 'avif', 'jpeg'],
  screens: { xs: 320, sm: 640, md: 768, lg: 1024, xl: 1280, xxl: 1536 },
  presets: {
    galleryThumb: { width: 400, height: 400, fit: 'cover', quality: 75, format: 'webp' },
    galleryFull: { width: 1200, quality: 85, format: 'webp' }
  }
}
```

# Note on SVG Images
Current images are SVG placeholders (/images/candidate-portrait.svg, team/*.svg). SVGs are not processed by @nuxt/image for format conversion. This is expected — real campaign photos (JPG/PNG) will benefit from NuxtImg when provided. The conversion work still applies structure for when real photos arrive.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add hero image preset to nuxt.config.ts</name>
  <files>nuxt.config.ts</files>
  <action>
Add a hero preset to the image.presets configuration in nuxt.config.ts:

1. Locate the image.presets section (already has galleryThumb and galleryFull)
2. Add a new hero preset:
   ```typescript
   hero: {
     width: 800,
     height: 1067,
     fit: 'cover',
     quality: 85,
     format: 'webp'
   }
   ```

The 3:4 aspect ratio (800x1067) matches the hero photo dimensions from HeroSection.vue (width="600" height="800" = 3:4 ratio). This preset ensures consistent sizing and WebP output for the LCP-critical hero image.

Do NOT modify existing galleryThumb or galleryFull presets.
  </action>
  <verify>
    nuxt.config.ts contains image.presets.hero with width, height, fit, quality, and format properties.
  </verify>
  <done>
    Hero preset added to image configuration with 3:4 aspect ratio and WebP format for LCP optimization.
  </done>
</task>

<task type="auto">
  <name>Task 2: Convert HeroSection.vue to use NuxtImg for LCP optimization</name>
  <files>components/HeroSection.vue</files>
  <action>
Update components/HeroSection.vue to use NuxtImg instead of standard img tag:

1. Find the existing <img> tag at line ~99-110
2. Replace with <NuxtImg> component:
   ```vue
   <NuxtImg
     :src="heroContent.photo"
     :alt="heroContent.photoAlt"
     :width="800"
     :height="1067"
     loading="eager"
     fetchpriority="high"
     preset="hero"
     format="webp"
     class="rounded-2xl shadow-2xl max-w-xs md:max-w-md lg:max-w-lg w-full h-auto object-cover"
     :class="{ 'hidden': imageError }"
     @load="handleImageLoad"
     @error="handleImageError"
   />
   ```

3. Keep the existing error handling placeholder div (lines ~112-130) unchanged
4. Keep the decorative background shape div (lines ~94-95) unchanged

Key changes:
- Replace <img> with <NuxtImg>
- Add preset="hero" to use the hero preset
- Add format="webp" for explicit format
- Update width/height to match preset (800/1067 for 3:4 ratio)

This optimizes the LCP element (hero photo is typically the largest contentful paint).
  </action>
  <verify>
    HeroSection.vue contains NuxtImg component with preset="hero", loading="eager", fetchpriority="high", format="webp", and explicit width/height.
  </verify>
  <done>
    Hero section uses NuxtImg with hero preset, enabling automatic WebP conversion and responsive sizing for the LCP-critical candidate photo.
  </done>
</task>

<task type="auto">
  <name>Task 3: Convert MembersSection.vue team photos to NuxtImg with lazy loading</name>
  <files>components/MembersSection.vue</files>
  <action>
Update components/MembersSection.vue to use NuxtImg for team member photos:

1. Find the <img> tag in the member card template (line ~74-79)
2. Replace with <NuxtImg> component:
   ```vue
   <NuxtImg
     :src="member.photo"
     :alt="member.alt || `${member.name}, ${member.role}`"
     width="128"
     height="128"
     loading="lazy"
     format="webp"
     class="w-32 h-32 rounded-full mx-auto mb-4 object-cover bg-gray-200"
   />
   ```

Key changes:
- Replace <img> with <NuxtImg>
- Remove loading="lazy" from original (now on NuxtImg)
- Add width="128" height="128" (32 * 4 for rounded-full w-32 h-32)
- Add format="webp" for optimization
- Keep existing alt text logic and classes

Team member photos are below-the-fold content, so lazy loading is appropriate. The explicit dimensions prevent CLS.
  </action>
  <verify>
    MembersSection.vue contains NuxtImg component for team photos with loading="lazy", width, height, and format attributes.
  </verify>
  <done>
    Team member photos use NuxtImg with lazy loading and explicit dimensions, preventing layout shift and enabling automatic format conversion.
  </done>
</task>

<task type="auto">
  <name>Task 4: Convert GalleryLightbox.client.vue to use NuxtImg for full-size images</name>
  <files>components/GalleryLightbox.client.vue</files>
  <action>
Update components/GalleryLightbox.client.vue to use NuxtImg for the lightbox full-size image:

1. Find the <img> tag displaying currentImage.src (line ~199-203)
2. Replace with <NuxtImg> component:
   ```vue
   <NuxtImg
     :src="currentImage.src"
     :alt="currentImage.alt"
     width="1200"
     height="900"
     loading="eager"
     format="webp"
     class="max-w-[90vw] max-h-[90vh] object-contain rounded-lg shadow-2xl"
     preset="galleryFull"
   />
   ```

Key changes:
- Replace <img> with <NuxtImg>
- Add preset="galleryFull" (already configured in nuxt.config.ts)
- Add width="1200" height="900" (4:3 aspect ratio for gallery photos)
- Add loading="eager" (lightbox images should load immediately when opened)
- Add format="webp" for optimization

Lightbox images are viewed on-demand, so eager loading is appropriate when the lightbox opens. The preset="galleryFull" uses the configured width and quality settings.
  </action>
  <verify>
    GalleryLightbox.client.vue contains NuxtImg component with preset="galleryFull", loading="eager", format, and explicit width/height.
  </verify>
  <done>
    Gallery lightbox uses NuxtImg with galleryFull preset, enabling optimized full-size image loading with automatic WebP conversion.
  </done>
</task>

</tasks>

<verification>
Overall verification steps:

1. Build verification: Run `npm run generate` — site builds without NuxtImg errors
2. Component inspection: All four components (HeroSection, GallerySection, MembersSection, GalleryLightbox) now use NuxtImg
3. Preset verification: nuxt.config.ts has hero, galleryThumb, and galleryFull presets
4. LCP configuration: Hero image has loading="eager" and fetchpriority="high"
5. Lazy loading: Team and gallery images have loading="lazy"
6. Dimensions: All NuxtImg instances have explicit width/height
7. Alt text: All images maintain descriptive alt text
</verification>

<success_criteria>
1. All <img> tags converted to <NuxtImg> in HeroSection, MembersSection, and GalleryLightbox
2. Hero preset added to nuxt.config.ts and used in HeroSection
3. LCP element (hero photo) configured with eager loading and high fetch priority
4. Below-fold images (team, gallery) configured with lazy loading
5. All images have explicit width/height dimensions to prevent CLS
6. Build completes successfully without NuxtImg errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-performance-seo/03-01-SUMMARY.md` documenting:
- Components converted to NuxtImg
- Hero preset added to configuration
- LCP optimization settings applied
- Any SVG-related limitations noted
- Time to complete
</output>
